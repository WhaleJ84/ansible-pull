---
- hosts: localhost
  connection: local
  gather_facts: true

  pre_tasks:
    - name: update apt repositories
      apt:
        update_cache: true
        cache_valid_time: 86400
      become: true
      changed_when: false
  
  roles:
    - role: whalej84.firefox
      vars:
        prevent_default_download_pdf: "true"
        remove_close_button_from_tabs: "true"
        toolbar_bookmark_visibility: "newtab"
        startup_page_option: 0
        allow_health_reporting: "false"
        allow_study_reporting: "false"
        load_new_tab_in_background: "false"
        ask_save_passwords: "false"
        ask_use_location: 2
        ask_use_camera: 2
        ask_use_microphone: 2
        ask_notify_desktop: 2
        do_not_track: "true"
        global_privacy_control: "true"
        recommended_stories: "false"
        sponsored_shortcuts: "false"
        browser_extensions:
          - id: uBlock0@raymondhill.net
            url: https://addons.mozilla.org/firefox/downloads/file/4290466/ublock_origin-latest.xpi
          - id: keepassxc-browser@keepassxc.org
            url: https://addons.mozilla.org/firefox/downloads/file/4285762/keepassxc_browser-latest.xpi
      tags: [ firefox ]
      
    - role: whalej84.keepassxc
      vars:
        theme: "light"
        compact_mode: "true"
        automatically_launch_keepassxc_at_system_startup: "true"
        minimize_instead_of_app_exit: "true"
        show_a_system_tray_icon: "true"
        tray_icon_type: "colorful"
        hide_window_to_system_tray_when_minimized: "true"
        enable_browser_integration: "true"
        enable_ssh_agent_integration: "true"
      tags: [ keepassxc ]

    - role: whalej84.tmux
      vars:
        tmux_config_dir: "{{ ansible_user_dir }}/.config/tmux"
      tags: [ tmux ]

    - role: whalej84.gnome-terminal
      vars:
        audible_bell: "false"
        # Gruvbox colours
        black: "'#FBFBF1F1C7C7'"
        red: "'#CCCC24241D1D'"
        green: "'#989897971A1A'"
        yellow: "'#D7D799992121'"
        blue: "'#454585858888'"
        magenta: "'#B1B162628686'"
        cyan: "'#68689D9D6A6A'"
        white: "'#7C7C6F6F6464'"
        bright_black: "'#929283837474'"
        bright_red: "'#9D9D00000606'"
        bright_green: "'#797974740E0E'"
        bright_yellow: "'#B5B576761414'"
        bright_blue: "'#070766667878'"
        bright_magenta: "'#8F8F3F3F7171'"
        bright_cyan: "'#42427B7B5858'"
        bright_white: "'#3C3C38383636'"
        #
        background_color: "{{ black }}"
        bold_color: "{{ bright_white }}"
        cursor_background_color: "{{ bright_white }}"
        cursor_foreground_color: "{{ black }}"
        foreground_color: "{{ bright_white }}"
        palette: "[{{ black }}, {{ red }}, {{ green }}, {{ yellow }}, {{ blue }}, {{ magenta }}, {{ cyan }}, {{ white }}, {{ bright_black }}, {{ bright_red }}, {{ bright_green }}, {{ bright_yellow }}, {{ bright_blue }}, {{ bright_magenta }}, {{ bright_cyan }}, {{ bright_white }}]"
        use_theme_colors: "false"
        cursor_shape: "ibeam"
        show_scrollbar: "never"
        theme_variant: "system"
        custom_command: "tmux"
      tags: [ gnome-terminal ]

    - name: whalej84.syncthing
      tags: [ syncthing ]

    - name: whalej84.git
      vars:
        config_location: "{{ ansible_user_dir }}/.config/git/config"
      tags: [ git ]
